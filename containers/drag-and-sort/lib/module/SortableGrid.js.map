{"version":3,"sources":["SortableGrid.tsx"],"names":["React","useContext","Animated","useAnimatedRef","useAnimatedScrollHandler","useSharedValue","Item","ConfigContext","List","children","editing","onDragEnd","config","SIZE","COL","scrollY","scrollView","positions","Object","assign","map","child","index","props","id","onScroll","contentOffset","y","value","height","Math","ceil","length"],"mappings":"AAAA,OAAOA,KAAP,IAA8BC,UAA9B,QAAgD,OAAhD;AACA,OAAOC,QAAP,IACEC,cADF,EAEEC,wBAFF,EAGEC,cAHF,QAIO,yBAJP;AAMA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,aAAT,QAA8B,iBAA9B;;AAWA,MAAMC,IAAI,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,OAAZ;AAAqBC,EAAAA;AAArB,CAAD,KAAiD;AAC5D,QAAMC,MAAM,GAAGX,UAAU,CAACM,aAAD,CAAzB;AACA,QAAM;AAAEM,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAgBF,MAAtB;AACA,QAAMG,OAAO,GAAGV,cAAc,CAAC,CAAD,CAA9B;AACA,QAAMW,UAAU,GAAGb,cAAc,EAAjC;AACA,QAAMc,SAAS,GAAGZ,cAAc,CAC9Ba,MAAM,CAACC,MAAP,CACE,EADF,EAEE,GAAGV,QAAQ,CAACW,GAAT,CAAa,CAACC,KAAD,EAAQC,KAAR,MAAmB;AAAE,KAACD,KAAK,CAACE,KAAN,CAAYC,EAAb,GAAkBF;AAApB,GAAnB,CAAb,CAFL,CAD8B,CAAhC;AAMA,QAAMG,QAAQ,GAAGrB,wBAAwB,CAAC;AACxCqB,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,aAAa,EAAE;AAAEC,QAAAA;AAAF;AAAjB,KAAD,KAA8B;AACtCZ,MAAAA,OAAO,CAACa,KAAR,GAAgBD,CAAhB;AACD;AAHuC,GAAD,CAAzC;AAMA,sBACE,oBAAC,QAAD,CAAU,UAAV;AACE,IAAA,QAAQ,EAAEF,QADZ;AAEE,IAAA,GAAG,EAAET,UAFP;AAGE,IAAA,qBAAqB,EAAE;AACrBa,MAAAA,MAAM,EAAEC,IAAI,CAACC,IAAL,CAAUtB,QAAQ,CAACuB,MAAT,GAAkBlB,GAA5B,IAAmCD;AADtB,KAHzB;AAME,IAAA,4BAA4B,EAAE,KANhC;AAOE,IAAA,OAAO,EAAE,KAPX;AAQE,IAAA,mBAAmB,EAAE;AARvB,KAUGJ,QAAQ,CAACW,GAAT,CAAcC,KAAD,IAAW;AACvB,wBACE,oBAAC,IAAD;AACE,MAAA,GAAG,EAAEA,KAAK,CAACE,KAAN,CAAYC,EADnB;AAEE,MAAA,SAAS,EAAEP,SAFb;AAGE,MAAA,EAAE,EAAEI,KAAK,CAACE,KAAN,CAAYC,EAHlB;AAIE,MAAA,OAAO,EAAEd,OAJX;AAKE,MAAA,SAAS,EAAEC,SALb;AAME,MAAA,UAAU,EAAEK,UANd;AAOE,MAAA,OAAO,EAAED;AAPX,OASGM,KATH,CADF;AAaD,GAdA,CAVH,CADF;AA4BD,CA7CD;;AA+CA,eAAeb,IAAf","sourcesContent":["import React, { ReactElement, useContext } from 'react';\nimport Animated, {\n  useAnimatedRef,\n  useAnimatedScrollHandler,\n  useSharedValue,\n} from 'react-native-reanimated';\n\nimport Item from './Item';\nimport { ConfigContext } from './ConfigContext';\n\ninterface Positions {\n  [id: string]: number;\n}\n\ninterface ListProps {\n  children: ReactElement<{ id: string }>[];\n  editing: boolean;\n  onDragEnd: (diff: Positions) => void;\n}\nconst List = ({ children, editing, onDragEnd }: ListProps) => {\n  const config = useContext(ConfigContext);\n  const { SIZE, COL } = config;\n  const scrollY = useSharedValue(0);\n  const scrollView = useAnimatedRef<Animated.ScrollView>();\n  const positions = useSharedValue<Positions>(\n    Object.assign(\n      {},\n      ...children.map((child, index) => ({ [child.props.id]: index }))\n    )\n  );\n  const onScroll = useAnimatedScrollHandler({\n    onScroll: ({ contentOffset: { y } }) => {\n      scrollY.value = y;\n    },\n  });\n\n  return (\n    <Animated.ScrollView\n      onScroll={onScroll}\n      ref={scrollView}\n      contentContainerStyle={{\n        height: Math.ceil(children.length / COL) * SIZE,\n      }}\n      showsVerticalScrollIndicator={false}\n      bounces={false}\n      scrollEventThrottle={16}\n    >\n      {children.map((child) => {\n        return (\n          <Item\n            key={child.props.id}\n            positions={positions}\n            id={child.props.id}\n            editing={editing}\n            onDragEnd={onDragEnd}\n            scrollView={scrollView}\n            scrollY={scrollY}\n          >\n            {child}\n          </Item>\n        );\n      })}\n    </Animated.ScrollView>\n  );\n};\n\nexport default List;\n"]}